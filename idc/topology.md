# IDC网络组网

互联网数据中心（Internet Data Center）简称IDC，就是电信部门利用已有的互联网通信线路、带宽资源，建立标准化的电信专业级机房环境，为企业、政府提供服务器托管、租用以及相关增值等方面的全方位服务。

## 网络层次架构

!topology](images/topology.png "topology")

### 骨干网

骨干网用于互联各个IDC，骨干层中的两台CR路由器直接与国干网和城域网互联，各机房IDC出口CR路由器则与骨干层出口路由器互联。


### 出口路由区

出口路由区的主要功能是作为IDC机房的出口，与国干网和城域网互联（多IDC场景连接骨干网），完成外部网络和IDC内网的三层互通，通常由两台CR路由器组成。

### 核心交换区

核心交换区配置IDC内网核心交换机，作为接入层与出口路由区的互联设备，起到汇聚流量的作用，同时IDC内部流量互通也可以通过核心交换机完成。
在云计算业务兴起后，为扩大二层网络规模，同时提高内网效率，网络交换网络大都采用核心层加接入层的扁平化组网，不再设置汇聚层。
为了实现高密接入，核心交换机通常采用数据中心级设备，具有高吞吐、大缓存等特点，同时通过IRF2网络虚拟化技术，将多台核心交换机虚拟成一台，既提高接入密度，又方便管理。

### 接入网络区

接入网络区下联物理服务器，上联核心交换机，主要部署千兆或万兆交换机。由于物理服务器数量多，且每台物理服务器均有多个端口，这就要求接入层交换机需要实现高密接入。
当前，在IDC网络中，接入交换机通常以TOR方式在每个机柜部署两台，实现本机柜的服务器接入。接入交换机通常采用千兆下行（连接服务器），万兆上行（连接核心交换机）的连接方式，并通过IRF2技术进行虚拟化部署。


## 网络设计

### IP地址规划

* 骨干网链路及网管
* IDC链路及网管
* 业务服务


### 网络逻辑拓扑

* 服务器的接入网关通常部署在核心交换机上
* 核心交换机与增值业务的FW等设备进行三层互连
* 核心交换机与出口CR路由器三层互连
* CR路由器与外部网络三层互连


### 网络接入区域设计

* 虚拟化聚合互联
核心交换机和接入层交换机都通过IRF2技术实现多虚一部署，通过跨设备链路聚合方式，实现接入层和核心交换机互连。这种方式的好处是不需要设计STP等复杂的二层网络技术即可实现高可靠部署，组网简单，管理方便。

* 接入层独立上连
若接入层交换机不支持虚拟化技术，采用非堆叠方式组网，核心交换机仍旧以IRF2虚拟化部署，此时接入层交换机通过跨设备聚合方式与核心交换机互连。为了不造成接入层环路，接入层交换机之间不做互连。

