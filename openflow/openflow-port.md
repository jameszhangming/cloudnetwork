# OpenFlow 端口

OpenFlow端口是OpenFlow处理单元与网路其他部分传递封包的网路接口。交换机在逻辑上与其他交换机都是通过OpenFlow端口相连，一个封包在两个交换机之间的传输只能从交换机1的出口端口到交换机2的入口端口。

OpenFlow交换机给OpenFlow处理提供了一定数目的OpenFlow端口，这些端口与交换机硬件提供的网路接口并不一定完全一致。有些接口不支持OpenFlow，OpenFlow交换机也有可能会添加额外的端口。
 
封包都是在入口端口处接收由流水线处理（见5.1），处理完后会转发至出口端口。入口端口会成为封包的一种属性，在流水线处理封包的过程中代表着封包进入交换机的端口，可以作为一种匹配属性。流水线可以通过输出动作将封包从出口端口输出，这一动作决定了封包如何从交换机回到网路中。


## 标准端口（Standard Ports）

OpenFlow标准端口定义为物理端口，逻辑端口以及本地预定的端口。


## 物理端口（Physical Ports）

OpenFlow的物理端口是与交换机硬件接口对应的由交换机定义的端口。举个例子，以太网交换机上，物理端口与以太网接口一一映射对应。


## 逻辑端口（Logical Ports）

逻辑端口指的是由交换机定义但不与硬件接口直接相关的端口。逻辑端口可能是由交换机使用非OpenFlow 方法定义的高阶抽象（如链路聚合组，隧道，回环接口）。

逻辑接口包含了封包封装且可能映射到各种物理端口。逻辑端口完成的封包处理必须依赖于应用，且处理过程对OpenFlow处理是透明的。这些端口必须采用与物理端口相同的方式来完成与OpenFlow处理的交互。

逻辑端口与物理端口唯一的区别在于与逻辑端口相关的封包必须有一个额外的流水线属性，隧道编号。当逻辑端口收到的封包被转发到控制器时，相关的物理端口与逻辑端口都会向制器发送报告。


## 保留端口（Reserved Ports）

它指明了一般性的转发规则，例如发送给控制器，泛洪或者是使用非OpenFlow的方式转发（如普通的以太网交换机处理）。

一个交换机不一定要支持全部的预定段端口，但必须支持表明必备的端口: 

* （必备）ALL：代表了交换机可以用于转发一个特定封包的所有端口。只能用作输出端口。在这种情况下，封包将被复制到各个端口执行出操作，当然封包的入端口与配置为OFPPC_NO_FWD的端口除外。
* （必备）控制器：代表与控制器相连的控制信道，可以作为入口端口或出口端口使用。作为入口端口使用时，将封包封装在Package-in消息中，并将其转发到控制器见（7.4.1）。作为出口端口使用时，它能识别封包来自于控制器。
* （必备）表：代表OpenFlow流水线的开始（见5.1）。这个端口只有在Package-out消息动作集中的输出动作里才有意义（见7.3.6）。执行输出操作是，将封包转发至第一个流表，由此开始一个OpenFlow流水线处理封包的过程。
* （必备）入端口：代表封包的入口端口。只能作为输出端口使用，通过它的入口端口送出封包。
* （必备）任意：在OpenFlow请求没有指定端口时使用的特殊值（也就是端口匹配值为通配符时）。一些OpenFlow指令可能指明只对特定的端口应用，这一属性取决于流表项的端口号码属性，当这一属性被设为ANY时，请求会引用到各个端口上。既不能做入口端口也不能做出口端口。
* （必备）未设置：用于指明输出端口在动作集中为设置的特殊值。只能在用匹配属性OXM_OF_ACTSET_OUTPUT来匹配动作集中的输出端口时使用（见7.2.3.7）。既不能做入口端口也不能做出口端口。
* （可选）本地：代表交换机的本地网络堆与它的管理堆。既能做入口端口也能做出口端口。本地端口使得远端实体可以与交换机及网路服务通过OpenFlow网路相连。在有着合适的默认流表项的情况下，本地端口可以用来做控制器的同频带信号传输的连接。
* （可选）普通：代表使用交换机的传统的非OpenFlow流水线转发方法（见5.1）。只能作为输出端口使用，使用普通的流水线处理封包。通常情况下会给封包架起网桥或是给封包指明路由路径，而实际上结果总是依赖于实现。如果交换机不能够从OpenFlow流水线转发封包到普通流水线，它必须不支持这个动作。
* （可选）泛洪：代表使用交换机的传统的非OpenFlow流水线泛洪（见5.1）。只能作为输出端口使用，实际结果依赖于实现。通常会在所有的标准端口送出封包，封包的入口端口与处于OFPPS_BLOCKED状态的端口除外。交换机也可能通过封包的VLAN ID或其他标准来选择实现泛洪的端口。

