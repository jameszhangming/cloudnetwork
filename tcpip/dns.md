# DNS

域名系统（英文：Domain Name System，缩写：DNS）是互联网的一项服务。它作为将域名和IP地址相互映射的一个分布式数据库，能够使人更方便地访问互联网。


## 为什么使用DNS

因特网上提供了数量极大的服务，如果直接使用IP地址来访问，非常不利于记忆，所以引入了域名机制，域名服务器提供了从域名到IP地址的解析服务，因特网上的域名数量极大，不可能所有的域名信息都保存在一个域名服务器中，也不能上述每个节点都采用一个域名服务器。在实际的公网DNS系统中，域名服务器采用划分区的方式来管理。


## 因特网DNS实现

在实际的公网DNS系统中，域名服务器采用划分区的方式来管理。一个服务器所负责管辖的范围叫做区(zone)，如果我们把域名空间结构中的根比作国家，顶级域名比作省级行政单位，二级域名看作是市级单位、三级、四级看作是镇和乡，那么自然地，我们会想到管辖国家的是总理，管辖省级单位的是省长，下面还有市长、镇长等等。

![DNS委托域](images/dns-domain.jpg "DNS委托域")


## 因特网域名空间结构

![DNS空间结构](images/dns-level.jpg "DNS空间结构")

顶级域名是域名的最后一个部分，即是域名最后一点之后的字母，例如在http://example.com这个域名中，顶级域是.com（或.COM），大小写视为相同。二级域名是域名的倒数第二个部分，例如在http://example.com这个域名中，二级域名是example。以此类推。


## 因特网域名服务器层次

![DNS服务器层次](images/dns-authoritative.jpg "DNS服务器层次")


### 根域名服务器

根域名服务器是最高层次的域名服务器(就好像国家总理一样)，也是最重要的域名服务器。全球有13个根域名服务器名称，分别是（它们是按照字母排列命名的）：
* a.root-servers.net.
* b.root-servers.net.
* c.root-servers.net.
* d.root-servers.net.
* e.root-servers.net.
* f.root-servers.net.
* g.root-servers.net.
* h.root-servers.net.
* i.root-servers.net.
* j.root-servers.net.
* k.root-servers.net.
* l.root-servers.net.
* m.root-servers.net.

当然，并不是一个名字对应一台物理服务器的地址，一个根服务器的名字可以作为入口对应一组服务器集群来提供域名解析服务。


### 顶级域名服务器

顶级域名服务器就好像国家总理下面的各个省长，管辖省级单位。在DNS中，它们负责管理在该顶级域名服务器注册的下一级域名(二级域名)。所有顶级域名服务器的名称和IP地址是在根服务器注册的，也就是说，根域名服务器知道所有的顶级域名服务器的名称和IP地址。


### 权威域名服务器

权威域名服务器负责一个区的域名服务器，就好像省长以下的那些市长、镇长、乡长等行政官。顶级域名服务器也可以算作是权威域名服务器，只不过由于其特殊性，我们专门把它划分为一类。因此权威域名服务器通常是指顶级域名以下的管理二级、三级、四级等域名的服务器。


### 本地域名服务器

本地域名服务器，这类服务器不属于上面的层次结构，当一个主机(个人电脑)发出DNS请求时，查询请求就被发送到本地域名服务器，本地域名服务器负责回答这个查询，或者代替主机向域名空间中不同层次的权威域名服务器查询，再把查询的结果返回给主机。


## DNS解析过程

下面的图示表示了一个域名的解析过程以及各个类型的域名服务器所处的位置。

![DNS解析过程](images/dns-progress2.jpg "DNS解析过程")
